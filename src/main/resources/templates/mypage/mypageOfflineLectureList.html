<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<div th:replace="import/cssImport.html :: css-import"></div>
	<link rel="stylesheet" href="/css/signupCustom.css">
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script type="text/javascript">
	function writeReview(classId, classIden, partnerOrderId) {
	    var win = window.open('/user/userReviewWrite/'+classId +'/' + classIden + '/' + partnerOrderId, '/user/userReviewWrite/'+classId +'/' + classIden+ '/' + partnerOrderId,
		  	'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no,width=600px,height=630px,left=100,top=100');
	}
	function viewReview(classId, classIden, partnerOrderId) {
	    var win = window.open('/user/userReviewView/'+classId +'/' + classIden + '/' + partnerOrderId, '/user/userReviewView/'+classId +'/' + classIden + '/' + partnerOrderId,
		  	'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no,width=600px,height=630px,left=100,top=100');
	}
	$(document).ready(function(){
		$("#beforeBtn").on('click', function(){
			alert("í´ë˜ìŠ¤ ìˆ˜ê°• ë‹¤ìŒ ë‚ ë¶€í„° í›„ê¸° ì‘ì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
		});
	});
	</script>
</head>
<body>
	<div th:insert="import/topImport.html :: top-import"></div>
	<div class="col-md-12 ftco-animate text-center">
    	<h1 class="mb-3 sub-title">ê³µë°© í´ë˜ìŠ¤ ìˆ˜ê°•ëª©ë¡</h1>
    	<p class="sub-title-second">ğŸ’¬ í›„ê¸° ì‘ì„± ì‹œ 200í¬ì¸íŠ¸ê°€ ì ë¦½ë©ë‹ˆë‹¤!</p>
  	</div>
  	
	<section class="ftco-animate my-4" >
		<div th:if="${session.SPRING_SECURITY_CONTEXT.Authentication.Authorities.toString == '[ROLE_USER]'}" class="list-area">
    		<p th:insert="import/mypageUserImport.html :: mypageUser-import"></p>
      		
      		<div class="list-container">
        		<div class="container list-section">
          			<div class="row mb-4 list-title">
            			<div class="col-8 text-center">ê°•ì˜ëª…</div>
            			<div class="col-2 text-center">ì°¸ì—¬ì¼ì</div>
            			<div class="col-2 text-center">ìƒíƒœ</div>
          			</div>
        		</div>
        		<div th:if="${classes} != null" class="container list-section">
        			<div th:each="class, loop:${classes}" class="row list-item list-item-lecture mb-2">
            			<div class="col-3 text-center mypage-lectureImg">
            				<a th:href="@{'/offlineClass/' + ${class.offlineClassId}}"><img src="images/bg_1" th:src="@{'/images/offlineThumbnail/' + ${class.offlineClassId} + '.jpg'}" th:onclick="|location.href='@{'/offlineClass/' + ${class.offlineClassId}}'|" th:style="${#temporals.format(#temporals.createDate(class.bookingDate, 'yyyyMMdd'), 'yyyy-MM-dd') < #temporals.format(now, 'yyyy-MM-dd')} ? 'filter: grayscale(100%);' : ''" /></a>
            			</div>
            			<div class="col-5 list-item-title">
            				<a class="item-lecture-title deco-title" th:href="@{'/offlineClass/' + ${class.offlineClassId}}" th:if="${#temporals.format(#temporals.createDate(class.bookingDate, 'yyyyMMdd'), 'yyyy-MM-dd') < #temporals.format(now, 'yyyy-MM-dd')}"	>
            				[[${class.offlineClassTitle}]]</a>
            				<a class="item-lecture-title" th:href="@{'/offlineClass/' + ${class.offlineClassId}}" th:unless="${#temporals.format(#temporals.createDate(class.bookingDate, 'yyyyMMdd'), 'yyyy-MM-dd') < #temporals.format(now, 'yyyy-MM-dd')}" 	>
            				[[${class.offlineClassTitle}]]</a>
            			</div>
        			<div class="col-2 text-center" th:text="|${#temporals.createDate(class.bookingDate, 'yyyyMMdd')} ${class.bookingTime}:00|" ><br/></div>
            			<div class="col-2 text-center">
            				<button type="button" class="my-lectureBtn my-lectureBtn-third my-1" id="beforeBtn" 
            						th:if="|${#temporals.format(#temporals.createDate(class.bookingDate, 'yyyyMMdd'), 'yyyy-MM-dd') >= #temporals.format(now, 'yyyy-MM-dd')}|" >ìˆ˜ê°• ì „</button>
            				<button type="button" class="my-lectureBtn my-1" id="reviewAdd" th:if="${#temporals.format(#temporals.createDate(class.bookingDate, 'yyyyMMdd'), 'yyyy-MM-dd') < #temporals.format(now, 'yyyy-MM-dd')} and ${reviewChk['__${class.partnerOrderId}__'] == '0'}"
            							th:onclick="writeReview([[${class.offlineClassId}]], 'OFF', [[${class.partnerOrderId}]])">í›„ê¸°ì‘ì„±</button>
            				<button type="button" class="my-lectureBtn my-lectureBtn-second my-1" th:if="${#temporals.format(#temporals.createDate(class.bookingDate, 'yyyyMMdd'), 'yyyy-MM-dd') < #temporals.format(now, 'yyyy-MM-dd')} and ${reviewChk['__${class.partnerOrderId}__'] != '0'}" 
            							th:onclick="viewReview([[${class.offlineClassId}]], 'OFF', [[${class.partnerOrderId}]])">í›„ê¸°ì¡°íšŒ</button>
						</div>
          			</div>
        		</div>
        		
        		<div class="row mt-5 justify-cotent-center" th:if="${!classes.isEmpty() and classes.getTotalElements() >= 5}">
					<div class="block-27 ad-paging-area">
			          	<ul class="mb-2 ad-paging-ul">
				            <!--ì´ì „-->
					        <li th:classappend="${!classes.hasPrevious ? 'ad-pagingBtn' : ''}" class="mx-1">
					            <a th:href="@{'/user/mypage/'+${id}+'/offlinelecturelist?page='+${classes.number-1}}">&lt;</a>
					        </li>
					        
					        <li th:each="page : ${#numbers.sequence(0, classes.totalPages - 1)}"
					       		th:if="${page >= classes.number-5 and page <= classes.number+5}"
					        	th:classappend="${page == classes.number} ? 'active'" class="mx-1">
					            <a th:href="@{'/user/mypage/'+${id}+'/offlinelecturelist?page='+${page}}" th:value="${classes.number}">[[|${page+1}|]]</a>
					        </li>
					        
					 		<!--ë‹¤ìŒ-->
					        <li th:classappend="${!classes.hasNext ? 'ad-pagingBtn' : ''}" class="mx-1">
					            <a th:href="@{'/user/mypage/'+${id}+'/offlinelecturelist?page='+${classes.number+1}}" >&gt;</a>
					        </li>
			    		</ul>
				    </div>
				</div>
				
        		<div th:if="${classes.isEmpty()}" class="container list-section">
        			<div class="list-section-none"><h5>ìˆ˜ê°• ì¤‘ì¸ ê°•ì˜ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</h5></div>
        		</div>
      		</div>
     	</div>
	</section>	

<div th:insert="import/bottomImport.html :: bottom-import"></div>	
<div th:replace="import/jsImport.html :: js-import"></div>
</body>
</html>